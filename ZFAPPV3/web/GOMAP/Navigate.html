<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
          <meta name='viewport' content='initial-scale=1.0, user-scalable=no' /> 
            <meta content="" name="keywords">
            <meta content="" name="description">

        <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,700|Open+Sans:300,300i,400,400i,700,700i" rel="stylesheet">
          <!-- Bootstrap CSS File -->
            <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
            <!-- Libraries CSS Files -->
            <link href="lib/animate/animate.min.css" rel="stylesheet">
            <link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet">
            <link href="lib/ionicons/css/ionicons.min.css" rel="stylesheet">
            <link href="lib/magnific-popup/magnific-popup.css" rel="stylesheet">  
            <link href="css/style.css" rel="stylesheet">
            <script src="lib/jquery/jquery.min.js"></script>


        <script src="keydragzoom.js" type="text/javascript"></script>
         <script type='text/javascript'    src='http://maps.google.com/maps/api/js?sensor=false&language=fa&key=AIzaSyDPq1UJKxyEgE90Bq6dEAKJKXXlc86lgnM'></script>   
                                                 <script src="keydragzoom.js" type="text/javascript"></script>
      
                                                 
                                                       <script type='text/javascript'>



function GetUrlParameter(name){
   
	var url_string = window.location.href ;
	var url = new URL(url_string);
	var c = url.searchParams.get(name);
	return c;
}

            function init() {

                       
                       var fromlocation =  GetUrlParameter("from");
                       var tolocation =  GetUrlParameter("to");
                       
                       user_Location.value = fromlocation;
                       parking_location.value = tolocation;
                var directionsService = new google.maps.DirectionsService();
                var directionsDisplay = new google.maps.DirectionsRenderer();
                var S_locationlat = 0;
                var S_locationlong = 0;

                var D_locationlat = 0;
                var D_locationlong = 0;




                if (user_Location.value.length > 0) {

                    var dataLat = user_Location.value.split('-');
                    S_locationlat = dataLat[0];
                    S_locationlong = dataLat[1];

                }


                if (parking_location.value.length > 0) {

                    var dataLat = parking_location.value.split('-');
                    D_locationlat = dataLat[0];
                    D_locationlong = dataLat[1];

                }


                var S_latlng = new google.maps.LatLng(S_locationlat, S_locationlong);
                var D_latlng = new google.maps.LatLng(D_locationlat, D_locationlong);

                var map = new google.maps.Map(document.getElementById('map_canvas'), {
                    zoom: 7,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                });

                map.setOptions({
                    zoomControl: false, disableDoubleClickZoom: true, mapTypeControl: false,
                    enableCloseButton: false, clickableIcons: false, disableDefaultUI: true, rotateControl: true, scaleControl: true, fullscreenControl: true
                });

                directionsDisplay.setMap(map);
                directionsDisplay.setPanel(document.getElementById('panel'));

                var request = {
                    origin: S_latlng,
                    destination: D_latlng,
                    travelMode: google.maps.DirectionsTravelMode.DRIVING
                };

                directionsService.route(request, function (response, status) {
                    if (status == google.maps.DirectionsStatus.OK) {
                        directionsDisplay.setDirections(response);
                    }
                });
            }





     </script> 

    
</head>
        
            
    <body onload='init()'>
        <input type="hidden" id="txtlocation" value="">
        <input type="hidden" id="txtdistance" value="">
        <input type="hidden" id="txtaddress_value"  value="">
        <input type="hidden" id="txt_full_address"  value="">
        <input type="hidden" id="txtaddress"  value="">
        <input type="hidden" id="SelectRecordID"  value="">
        <input type="hidden" id="SelectRecordValue"  value="">
        <input type="hidden" id="user_Location"  value="">
        <input type="hidden" id="parking_location"  value="">
        
                     <div id='map_canvas' style='width:100%; height:98vh'>
                                     
                     </div>                                      
                    
        <div id='panel' style="width:100%;" >
                                     
                    </div>            
        
    </body>
</html>
